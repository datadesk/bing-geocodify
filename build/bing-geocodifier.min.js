!function t(e,i,o){function s(n,l){if(!i[n]){if(!e[n]){var d="function"==typeof require&&require;if(!l&&d)return d(n,!0);if(r)return r(n,!0);var a=new Error("Cannot find module '"+n+"'");throw a.code="MODULE_NOT_FOUND",a}var c=i[n]={exports:{}};e[n][0].call(c.exports,function(t){var i=e[n][1][t];return s(i||t)},c,c.exports,t,e,i,o)}return i[n].exports}for(var r="function"==typeof require&&require,n=0;n<o.length;n++)s(o[n]);return s}({1:[function(t,e,i){var o={callbackCounter:0,head:document.getElementsByTagName("head")[0],fetch:function(t,e){var i="JSONPCallback_"+this.callbackCounter++;window[i]=this.evalJSONP(e),t=t.replace("=JSONPCallback","="+i);var o=document.createElement("script");o.src=t,this.head.appendChild(o)},evalJSONP:function(t){return this.head.removeChild(this.head.childNodes[this.head.childNodes.length-1]),function(e){t(e)}}},s=function(t,e){this.el=document.getElementById(t),this.bingApiUrl="https://dev.virtualearth.net/REST/v1/Locations/",this.bingApiKey=e.key||null,this.results=null,this.filters=e.filters||null,this.selectedResult=null,this.lookupForm=document.createElement("form"),this.lookupForm.id="bing-geocodifier-form",this.lookupForm.className="geocodifier-form",this.textInput=document.createElement("input"),this.textInput.setAttribute("type","text"),this.textInput.setAttribute("autocomplete","off"),this.textInput.className="geocodify-input",e.defaultText?this.textInput.setAttribute("placeholder",e.defaultText):this.textInput.setAttribute("placeholder","Search an address"),this.dropdown=document.createElement("div"),this.dropdown.className="geocodify-dropdown hidden",this.id="bing-geocodifier-dropdown",this.lookupForm.appendChild(this.textInput),this.lookupForm.appendChild(this.dropdown),this.el.appendChild(this.lookupForm),e.onClick&&(this.onItemClick=e.onClick);this.lookupForm.addEventListener("keyup",this.onKeyUp.bind(this)),this.lookupForm.addEventListener("click",this.onClick.bind(this)),this.lookupForm.onsubmit=function(){return!1}};s.prototype.onItemClick=function(t){},s.prototype.onClick=function(t){var e=t.target;if("li"===e.tagName.toLowerCase())for(var i,o=e.parentNode.children,s=0;s<o.length;s+=1)e.parentNode.children[s]===t.target&&(i=this.results[s],i.geocodePoints[0].coordinates,this.fillTextInput(i))},s.prototype.fillTextInput=function(t){this.textInput.value!==t.name&&(this.textInput.value=t.name,this.dropdown.classList.add("hidden"),this.onItemClick(t,t.geocodePoints[0].coordinates))},s.prototype.onKeyUp=function(t){switch(t.keyCode){case 27:this.hideSearchDropDown();break;case 13:t.stopPropagation(),t.preventDefault(),this.triggerKeySelect();break;case 39:this.textInput.selectionStart===this.textInput.value.length&&this.triggerKeySelect();break;case 38:t.stopPropagation(),t.preventDefault(),document.querySelector(".active").classList.remove("active"),this.selectedResult&&this.selectedResult>0?this.selectedResult--:this.selectedResult=this.results.length-1,document.querySelectorAll(".geocodify-dropdown li")[this.selectedResult].classList.add("active");break;case 40:t.stopPropagation(),t.preventDefault(),document.querySelector(".active").classList.remove("active"),this.selectedResult<this.results.length-1?this.selectedResult++:this.selectedResult=0,document.querySelectorAll(".geocodify-dropdown li")[this.selectedResult].classList.add("active");break;default:this.getGeocodeData()}},s.prototype.triggerKeySelect=function(){if(this.results&&this.results.length>-1){var t=this.selectedResult,e=this.results[t];this.fillTextInput(e)}},s.prototype.filterResults=function(t){function e(t){if("[object Array]"===Object.prototype.toString.call(o.filters[s])){for(var e=0;e<s.length;e++)if(t.address[s]===o.filters[s][e])return!0;return!1}return t.address[s]===o.filters[s]}var i=t.resourceSets[0].resources,o=this;for(var s in this.filters)i=i.filter(e);return i},s.prototype.buildAutofillList=function(){var t=this.results;if(t.length>0){this.selectedResult=0,this.dropdown.innerHTML="";for(var e=document.createElement("ul"),i=0;i<t.length;i+=1){var o=document.createElement("li");o.textContent=t[i].name,0===i&&o.classList.add("active"),e.appendChild(o)}this.dropdown.appendChild(e),this.dropdown.classList.remove("hidden")}else this.dropdown.classList.add("hidden")},s.prototype.getGeocodeData=function(t){var e=this;if(""!==this.textInput.value.trim()){var i=this.textInput.value,s=this.bingApiUrl+"?q="+encodeURIComponent(i)+"&key="+this.bingApiKey+"&maxResults=10&jsonp=JSONPCallback";o.fetch(s,function(t){e.results=e.filterResults(t),e.buildAutofillList()})}},s.prototype.hideSearchDropDown=function(){this.dropdown.innerHTML="",this.dropdown.classList.add("hidden"),this.textInput.value=""},window.BingGeocodifier=s},{}]},{},[1]);